\section{Пример работы программы}

\subsection{Запуск сервера}

Первым запускается сервер. Он создаёт разделяемую память и инициализирует все структуры данных:

\begin{verbatim}
$ ./server
=== SERVER RUNNING ===
Server: shared memory initialized
\end{verbatim}

Сервер готов к приёму подключений клиентов и ожидает сообщений в бесконечном цикле.

\subsection{Запуск клиентов и регистрация}

Запускаем двух клиентов в разных терминалах. Первый игрок регистрируется как "Alice":

\begin{verbatim}
$ ./client
==================================================
  ДОБРО ПОЖАЛОВАТЬ В МОРСКОЙ БОЙ!
==================================================
  Введите ваш логин: Alice

[Регистрация...]

REGISTERED:OK
\end{verbatim}

Второй игрок регистрируется как "Bob":

\begin{verbatim}
$ ./client
==================================================
  ДОБРО ПОЖАЛОВАТЬ В МОРСКОЙ БОЙ!
==================================================
  Введите ваш логин: Bob

[Регистрация...]

REGISTERED:OK
\end{verbatim}

На сервере появляются соответствующие сообщения:

\begin{verbatim}
Registered client: Alice
Registered client: Bob
\end{verbatim}

\subsection{Создание и поиск игры}

Alice создаёт публичную игру "Battle1":

\begin{verbatim}
==================================================
  МОРСКОЙ БОЙ
==================================================
  1 - Список игроков и игр
  2 - Создать публичную игру
  3 - Присоединиться к игре
  4 - Пригласить игрока
  5 - Проверить приглашения
  6 - Выйти
  Выберите действие: 2

Введите имя для новой игры: Battle1

GAME_CREATED:Публичная игра 'Battle1' создана (ID: 0)
Вы вошли в игру. Начинайте расстановку кораблей!
\end{verbatim}

На сервере:

\begin{verbatim}
Public game 'Battle1' created by Alice (ID: 0)
\end{verbatim}

Bob запрашивает список доступных игр:

\begin{verbatim}
==================================================
  МОРСКОЙ БОЙ
==================================================
  1 - Список игроков и игр
  2 - Создать публичную игру
  3 - Присоединиться к игре
  4 - Пригласить игрока
  5 - Проверить приглашения
  6 - Выйти
  Выберите действие: 1

=== ИГРОКИ ОНЛАЙН (2) ===
  Alice [в игре]
  Bob

=== ДОСТУПНЫЕ ИГРЫ (1) ===
  Battle1 (ID: 0) - создатель: Alice

Присоединиться: join <имя_игры> или join <ID>
\end{verbatim}

Bob присоединяется к игре по ID:

\begin{verbatim}
Выберите действие: 3

Введите имя или ID игры: 0

Вы присоединились к игре!
SHIP_PLACEMENT:
Разместите корабли: place размер,x,y,ориентация(H/V)
Корабли: 1x4, 2x3, 3x2, 4x1
Пример: place 4,0,0,H
Когда готовы: ready
\end{verbatim}

Alice получает уведомление:

\begin{verbatim}
OPPONENT_JOINED:Игрок присоединился
SHIP_PLACEMENT:
Разместите корабли: place размер,x,y,ориентация(H/V)
Корабли: 1x4, 2x3, 3x2, 4x1
Пример: place 4,0,0,H
Когда готовы: ready
\end{verbatim}

\subsection{Фаза расстановки кораблей}

Оба игрока начинают расставлять корабли. Alice использует автоматическую расстановку:

\begin{verbatim}
==================================================
  РАССТАНОВКА КОРАБЛЕЙ
==================================================
  Формат: размер,x,y,ориентация(H/V)
  Пример: 4,0,0,H

  Корабли для размещения:
    1 авианосец (4 клеток)
    2 линкора (3 клетки)
    3 крейсера (2 клетки)
    4 эсминца (1 клетки)
--------------------------------------------------
  Команды:
    auto - автоматическая расстановка
    ready - готов к игре
    board - посмотреть поле
    invite <логин> - пригласить игрока в эту игру
    menu - выйти в меню
--------------------------------------------------

Команда: auto

==================================================
  АВТОМАТИЧЕСКАЯ РАССТАНОВКА КОРАБЛЕЙ
==================================================
Размещаем корабль: 4,0,0,H... Успешно
Размещаем корабль: 3,0,5,H... Успешно
Размещаем корабль: 3,0,8,H... Успешно
Размещаем корабль: 2,8,8,H... Успешно
Размещаем корабль: 2,5,5,V... Успешно
Размещаем корабль: 2,8,4,H... Успешно
Размещаем корабль: 1,6,0,H... Успешно
Размещаем корабль: 1,6,2,H... Успешно
Размещаем корабль: 1,3,2,H... Успешно
Размещаем корабль: 1,9,0,H... Успешно
--------------------------------------------------
  РАССТАНОВКА ЗАВЕРШЕНА
  Размещено кораблей: 10/10
  Все корабли успешно размещены!

  Показываем поле...
\end{verbatim}

Alice смотрит своё поле:

\begin{verbatim}
Команда: board

YOUR_BOARD:
    0  1  2  3  4  5  6  7  8  9
 0  S  S  S  S  .  .  .  .  .  .
 1  .  .  .  .  .  .  .  .  .  .
 2  .  .  .  S  .  .  S  .  .  .
 3  .  .  .  .  .  .  .  .  .  .
 4  .  .  .  .  .  .  .  .  S  S
 5  .  .  .  .  .  S  .  .  .  .
 6  .  .  .  .  .  S  .  .  .  .
 7  .  .  .  .  .  S  .  .  .  .
 8  .  .  .  .  .  .  .  .  S  S
 9  S  .  .  .  .  .  .  .  .  .
\end{verbatim}

Bob размещает корабли вручную:

\begin{verbatim}
Команда: place 4,0,0,H
SHIP_PLACED:OK

Команда: place 3,0,5,H
SHIP_PLACED:OK

Команда: place 3,0,8,H
SHIP_PLACED:OK
\end{verbatim}

После размещения всех кораблей Bob отправляет команду готовности:

\begin{verbatim}
Команда: ready

Отправляем 'ready' на сервер...

SETUP_COMPLETE:Waiting for opponent...
\end{verbatim}

Когда Alice также отправляет "ready", игра переходит в активную фазу:

\begin{verbatim}
Команда: ready

Отправляем 'ready' на сервер...

ВАШ ХОД! Make your move
\end{verbatim}

\subsection{Фаза боя}

Игра начинается. Alice ходит первой:

\begin{verbatim}
========================================
  ИГРА В ПРОЦЕССЕ
========================================
  1 - Сделать выстрел
  2 - Посмотреть свое поле
  3 - Посмотреть поле противника
  4 - Статус игры
  5 - Сдаться
  6 - Выйти в меню
----------------------------------------
  Выберите действие: 1

Координаты выстрела (x,y): 5,5

Отправляем выстрел...

Ответ сервера получен

РЕЗУЛЬТАТ ВЫСТРЕЛА: MISS at 5,5
\end{verbatim}

Bob получает уведомление и делает свой ход:

\begin{verbatim}
ПРОТИВНИК СТРЕЛЯЕТ: Alice at 5,5:MISS
ВАШ ХОД! Make your move

Выберите действие: 1

Координаты выстрела (x,y): 0,0

Отправляем выстрел...

РЕЗУЛЬТАТ ВЫСТРЕЛА: HIT at 0,0

ВАШ ХОД СНОВА! You hit! Shoot again
\end{verbatim}

\subsection{Завершение игры}

После нескольких ходов Bob уничтожает последний корабль Alice:

\begin{verbatim}
РЕЗУЛЬТАТ ВЫСТРЕЛА: HIT at 9,0
==================================================
  ПОБЕДА!
  You won the game!
==================================================

FINAL_STATS:
Статистика:
Сбито кораблей: 10
Попаданий: 15
Промахов: 3
Игра завершена!
Вы победили!
\end{verbatim}

Alice получает уведомление о поражении:

\begin{verbatim}
ПРОТИВНИК СТРЕЛЯЕТ: Bob at 9,0:HIT
==================================================
  ПОРАЖЕНИЕ
  You lost the game
==================================================

FINAL_STATS:
Статистика:
Сбито кораблей: 7
Попаданий: 10
Промахов: 8
Игра завершена!
Победил: Bob
\end{verbatim}

\subsection{Выход из системы}

Игрок может выйти из системы:

\begin{verbatim}
==================================================
  МОРСКОЙ БОЙ
==================================================
  1 - Список игроков и игр
  2 - Создать публичную игру
  3 - Присоединиться к игре
  4 - Пригласить игрока
  5 - Проверить приглашения
  6 - Выйти
  Выберите действие: 6

Вы уверены? (да/нет): да

Выход...

==================================================
  ИГРА ЗАВЕРШЕНА
  Спасибо за игру!
==================================================
\end{verbatim}

На сервере фиксируется отключение клиента:

\begin{verbatim}
Client quit: Alice
\end{verbatim}